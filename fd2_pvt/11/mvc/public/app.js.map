{"version":3,"sources":["webpack:///webpack/bootstrap cb2add5544edfdfabd3a","webpack:///./src/helpers.js","webpack:///./src/controller.js","webpack:///./src/model.js","webpack:///./src/view.js","webpack:///./src/index.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;AChEA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;AClDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA,gBAAgB,gBAAgB;AAChC,gDAAgD,YAAY;;AAE5D;AACA;;AAEA,cAAc,YAAY;AAC1B,gDAAgD,QAAQ;;AAExD;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEe,mEAAU,E;;;;;;;ACzCzB;AAAyC;;AAEzC,oBAAoB,8DAAY;AAChC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEe,8DAAK,E;;;;;;;ACvCpB;AAAwD;;AAExD,mBAAmB,8DAAY;AAC/B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,yBAAyB,sFAAa,WAAW,oFAAoF;AACrI,sBAAsB,sFAAa,WAAW,qBAAqB;AACnE,0BAA0B,sFAAa,WAAW,uCAAuC;AACzF,2BAA2B,sFAAa,YAAY,oBAAoB;AACxE,6BAA6B,sFAAa,YAAY,sBAAsB;AAC5E,qBAAqB,sFAAa,QAAQ,wBAAwB,kCAAkC,uBAAuB;;AAE3H;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oDAAoD,GAAG;AACvD;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA,kBAAkB,SAAS;AAC3B;AACA;AACA;;AAEA,6BAA6B,gBAAgB;AAC7C;;AAEA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,+BAA+B,YAAY;AAC3C,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,SAAS;AAC3B;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEe,6DAAI,E;;;;;;;AChInB;AAAA;AAAA;AAAA;AAAA;AAA4B;AACF;AACY;AACC;;AAEvC,cAAc,6EAAI;;AAElB,kBAAkB,uDAAK;AACvB,4BAA4B,6EAAI;;AAEhC,iBAAiB,sDAAI;AACrB,uBAAuB,4DAAU,c","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cb2add5544edfdfabd3a","function createElement(tag, props, ...children) {\n    const element = document.createElement(tag);\n\n    Object.keys(props).forEach(key => {\n        if (key.startsWith('data-')) {\n            element.setAttribute(key, props[key]);\n        } else {\n            element[key] = props[key];\n        }\n    });\n\n    children.forEach(child => {\n        if (typeof child === 'string') {\n            child = document.createTextNode(child);\n        }\n\n        element.appendChild(child);\n    });\n\n    return element;\n}\n\nclass EventEmitter {\n    constructor() {\n        this.events = {};\n    }\n\n    on(type, listener) {\n        this.events[type] = this.events[type] || [];\n        this.events[type].push(listener);\n    }\n\n    emit(type, arg) {\n        if (this.events[type]) {\n            this.events[type].forEach(listener => listener(arg));\n        }\n    }\n}\n\nfunction save(data) {\n    const string = JSON.stringify(data);\n\n    localStorage.setItem('todos', string);\n}\n\nfunction load() {\n    const string = localStorage.getItem('todos');\n    const data = JSON.parse(string);\n\n    return data;\n}\n\nexport { createElement, EventEmitter, save, load };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/helpers.js\n// module id = 0\n// module chunks = 0","class Controller {\n    constructor(model, view) {\n        this.model = model;\n        this.view = view;\n        \n        view.on('add', this.addTodo.bind(this));\n        view.on('toggle', this.toggleTodo.bind(this));\n        view.on('edit', this.editTodo.bind(this));\n        view.on('remove', this.removeTodo.bind(this));\n\n        view.show(model.items);\n    }\n\n    addTodo(title) {\n        const item = this.model.addItem({\n            id: Date.now(),\n            title,\n            completed: false\n        });\n\n        this.view.addItem(item);\n    }\n\n    toggleTodo({ id, completed }) {\n        const item = this.model.updateItem(id, { completed });\n\n        this.view.toggleItem(item);\n    }\n\n    editTodo({ id, title }) {\n        const item = this.model.updateItem(id, { title });\n        \n        this.view.editItem(item);\n    }\n\n    removeTodo(id) {\n        this.model.removeItem(id);\n        this.view.removeItem(id);\n    }\n}\n\nexport default Controller;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/controller.js\n// module id = 1\n// module chunks = 0","import { EventEmitter } from './helpers';\n\nclass Model extends EventEmitter {\n    constructor(items = []) {\n        super();\n        \n        this.items = items;\n    }\n\n    getItem(id) {\n        return this.items.find(item => item.id == id);\n    }\n\n    addItem(item) {\n        this.items.push(item);\n        this.emit('change', this.items);\n        return item;\n    }\n\n    updateItem(id, data) {\n        const item = this.getItem(id);\n\n        Object.keys(data).forEach(prop => item[prop] = data[prop]);\n\n        this.emit('change', this.items);\n        \n        return item;\n    }\n\n    removeItem(id) {\n        const index = this.items.findIndex(item => item.id == id);\n        \n        if (index > -1) {\n            this.items.splice(index, 1);\n            this.emit('change', this.items);\n        }\n    }\n}\n\nexport default Model;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/model.js\n// module id = 2\n// module chunks = 0","import { EventEmitter, createElement } from './helpers';\n\nclass View extends EventEmitter {\n    constructor() {\n        super();\n\n        this.form = document.getElementById('todo-form');\n        this.input = document.getElementById('add-input');\n        this.list = document.getElementById('todo-list');\n\n        this.form.addEventListener('submit', this.handleAdd.bind(this));\n    }\n\n    createListItem(todo) {\n        const checkbox = createElement('input', { type: 'checkbox', className: 'checkbox', checked: todo.completed ? 'checked' : '' });\n        const label = createElement('label', { className: 'title' }, todo.title);\n        const editInput = createElement('input', { type: 'text', className: 'textfield' });\n        const editButton = createElement('button', { className: 'edit' }, 'Изменить');\n        const deleteButton = createElement('button', { className: 'remove' }, 'Удалить');\n        const item = createElement('li', { className: `todo-item${todo.completed ? ' completed': ''}`, 'data-id': todo.id }, checkbox, label, editInput, editButton, deleteButton);\n\n        return this.addEventListeners(item);\n    }\n\n    addEventListeners(item) {\n        const checkbox = item.querySelector('.checkbox');\n        const editButton = item.querySelector('button.edit');\n        const removeButton = item.querySelector('button.remove');\n\n        checkbox.addEventListener('change', this.handleToggle.bind(this));\n        editButton.addEventListener('click', this.handleEdit.bind(this));\n        removeButton.addEventListener('click', this.handleRemove.bind(this));\n\n        return item;\n    }\n\n    findListItem(id) {\n        return this.list.querySelector(`[data-id=\"${id}\"]`);\n    }\n\n    handleAdd(event) {\n        event.preventDefault();\n\n        if (!this.input.value) return alert('Необходимо ввести название задачи.');\n\n        const value = this.input.value;\n\n        this.emit('add', value);\n    }\n\n    handleToggle({ target }) {\n        const listItem = target.parentNode;\n        const id = listItem.getAttribute('data-id');\n        const completed = target.checked;\n\n        this.emit('toggle', { id, completed });\n    }\n\n    handleEdit({ target }) {\n        const listItem = target.parentNode;\n        const id = listItem.getAttribute('data-id');\n        const label = listItem.querySelector('.title');\n        const input = listItem.querySelector('.textfield');\n        const editButton = listItem.querySelector('button.edit');\n        const title = input.value;\n        const isEditing = listItem.classList.contains('editing');\n\n        if (isEditing) {\n            this.emit('edit', { id, title });\n        } else {\n            input.value = label.textContent;\n            editButton.textContent = 'Сохранить';\n            listItem.classList.add('editing');\n        }\n    }\n\n    handleRemove({ target }) {\n        const listItem = target.parentNode;\n\n        this.emit('remove', listItem.getAttribute('data-id'));\n    }\n\n    show(todos) {\n        todos.forEach(todo => {\n            const listItem = this.createListItem(todo);\n\n            this.list.appendChild(listItem);\n        });\n    }\n\n    addItem(todo) {\n        const listItem = this.createListItem(todo);\n\n        this.input.value = '';\n        this.list.appendChild(listItem);\n    }\n\n    toggleItem(todo) {\n        const listItem = this.findListItem(todo.id);\n        const checkbox = listItem.querySelector('.checkbox');\n\n        checkbox.checked = todo.completed;\n\n        if (todo.completed) {\n            listItem.classList.add('completed');\n        } else {\n            listItem.classList.remove('completed');\n        }\n    }\n\n    editItem(todo) {\n        const listItem = this.findListItem(todo.id);\n        const label = listItem.querySelector('.title');\n        const input = listItem.querySelector('.textfield');\n        const editButton = listItem.querySelector('button.edit');\n\n        label.textContent = todo.title;\n        editButton.textContent = 'Изменить';\n        listItem.classList.remove('editing');\n    }\n\n    removeItem(id) {\n        const listItem = this.findListItem(id);\n\n        this.list.removeChild(listItem);\n    }\n}\n\nexport default View;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/view.js\n// module id = 3\n// module chunks = 0","import Model from './model';\nimport View from './view';\nimport Controller from './controller';\nimport { save, load } from './helpers';\n\nconst state = load();\n\nconst model = new Model(state || undefined);\nmodel.on('change', state => save(state));\n\nconst view = new View();\nconst controller = new Controller(model, view);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 4\n// module chunks = 0"],"sourceRoot":""}